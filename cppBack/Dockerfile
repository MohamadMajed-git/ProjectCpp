# 1. ุงุณุชุฎุฏุงู ุฃูุจููุชู ูุฃุณุงุณ
FROM ubuntu:latest

# 2. ุชุญุฏูุซ ุงููุธุงู ูุชุซุจูุช ุงููุชุฑุฌู ูููุชุจุงุช MariaDB/MySQL
RUN apt-get update && apt-get install -y \
    g++ \
    build-essential \
    wget \
    libmariadb-dev \
    libssl-dev

# 3. ุชุญุฏูุฏ ูุฌูุฏ ุงูุนูู
WORKDIR /app

# 4. ุชุญููู ููุชุจุฉ Crow (ุงุญุชูุงุทูุงู ูู ุญุงู ูู ุชูู ููุฌูุฏุฉ ูุญููุงู)
RUN wget https://github.com/CrowCpp/Crow/releases/download/v1.0+5/crow_all.h -O crow.h

# 5. ูุณุฎ ุฌููุน ูููุงุช ุงููุดุฑูุน ุฅูู ุงูุณูุฑูุฑ
COPY . .

# 6. ุชุฌููุน ุงูููุฏ (ุงูุฎุทูุฉ ุงูุญุงุณูุฉ)
# ูุงุญุธ: ูููุง ุจุชุถููู Classes/*.cpp ูุญู ูุดููุฉ ุงูู Linker
RUN g++ -o my_server *.cpp Classes/*.cpp \
    -std=c++17 \
    -I. \
    -I./libs/crow -I./libs/asio \
    -I/usr/include/mariadb \
    -lpthread -lmariadb \
    -DCROW_USE_STANDALONE_ASIO

# 7. ูุชุญ ุงูุจูุฑุช
EXPOSE 10000

# 8. ุฃูุฑ ุงูุชุดุบูู
CMD ["./my_server"]
```

### ๐ ุงูุฎุทูุงุช ุงูููุงุฆูุฉ ููุฑูุน (Deploy):

1.  **ุงุญูุธ ุงูููู:** ุชุฃูุฏ ุฃู ุงุณู ุงูููู ูู `Dockerfile` (ุจุฏูู ุฃู ุงูุชุฏุงุฏ ูุซู .txt).
2.  **ุงุฑูุน ุงูุชุนุฏููุงุช:**
    ```bash
    git add .
    git commit -m "Fixed Dockerfile compilation command"
    git push